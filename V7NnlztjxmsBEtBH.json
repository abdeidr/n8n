{
  "active": false,
  "connections": {
    "When clicking ‚ÄòExecute workflow‚Äô": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "enlaces normales",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "enlaces en formato yt-dlp1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command": {
      "main": [
        []
      ]
    }
  },
  "createdAt": "2025-08-19T19:14:14.850Z",
  "id": "V7NnlztjxmsBEtBH",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "extraer enlaces",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "799e9f5a-ecb4-4cd5-a4ef-d67de743d7e7",
      "name": "When clicking ‚ÄòExecute workflow‚Äô"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2799a138-d176-4783-8aa0-ef6a38f42e46",
              "name": "pageurl",
              "value": "https://www.skool.com/ia-masters-automations/classroom/c1117413?md=ffda3ebc2c834713a3cc7e725275a5b7",
              "type": "string"
            },
            {
              "id": "592c8590-6316-4dff-af8f-714899805042",
              "name": "",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        176,
        0
      ],
      "id": "2678fb08-c4b1-4df7-b2f7-746831cc869b",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "url": "={{ $json.pageurl }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36"
            },
            {
              "name": "Cookie",
              "value": "[REDACTED]"
            }
          ]
        },
        "options": {
          "response": {
            "response": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        352,
        0
      ],
      "id": "2b9223b0-83ba-4151-916a-98e333a6c860",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "command": "=./yt-dlp \"{{ $json.loomUrl }}\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        848,
        0
      ],
      "id": "f313a39a-2465-413a-8503-2f5dc4394536",
      "name": "Execute Command"
    },
    {
      "parameters": {
        "jsCode": "// Obtener el contenido HTML o JSON de entrada\nconst content = $json.body || $json.data || $json;\n\n// Convertir todo a texto, en caso sea JSON o HTML\nconst text = typeof content === 'string' ? content : JSON.stringify(content);\n\n// Expresi√≥n regular para encontrar enlaces loom\nconst regex = /https?:\\/\\/(www\\.)?loom\\.com\\/share\\/[a-zA-Z0-9]+/g;\n\n// Buscar todas las coincidencias\nconst matches = text.match(regex) || [];\n\n// Quitar duplicados usando un Set\nconst uniqueLinks = Array.from(new Set(matches));\n\n// Formatear para la ejecuci√≥n con yt-dlp\nreturn uniqueLinks.map(link => ({ json: { command: `./yt-dlp \"${link}\"` } }));\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        592,
        144
      ],
      "id": "e71b9ec3-2fcc-4e3d-9b75-c6f1ac3add57",
      "name": "enlaces en formato yt-dlp"
    },
    {
      "parameters": {
        "jsCode": "const html = items[0].json.htmlContent;  // Aseg√∫rate de que el HTML est√° aqu√≠\n\n// Busca todos los href que est√©n en un a que tenga despu√©s un span con la clase que quieres\nconst regex = /<a[^>]*href=\"([^\"]+)\"[^>]*>\\s*<span class=\"styled__ResourceLabel-sc-1wq200d-3 hTmQmb\"/g;\n\nconst enlaces = [];\nlet match;\n\nwhile ((match = regex.exec(html)) !== null) {\n  enlaces.push(match[1]);\n}\n\nreturn enlaces.map(enlace => ({ json: { enlace } }));\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        592,
        0
      ],
      "id": "79dd6863-8eb9-4947-9a5d-97904c506015",
      "name": "enlaces normales"
    },
    {
      "parameters": {
        "jsCode": "const data = items[0].json;\n\n// Funci√≥n recursiva para recorrer el JSON\nfunction extractLinks(obj) {\n  let results = [];\n  if (typeof obj === \"string\") {\n    if (obj.includes(\"loom\") || obj.endsWith(\".gif\")) {\n      results.push(obj);\n    }\n  } else if (Array.isArray(obj)) {\n    obj.forEach(item => {\n      results = results.concat(extractLinks(item));\n    });\n  } else if (typeof obj === \"object\" && obj !== null) {\n    Object.values(obj).forEach(val => {\n      results = results.concat(extractLinks(val));\n    });\n  }\n  return results;\n}\n\n// Extraer los links\nconst links = extractLinks(data);\n\n// Eliminar duplicados\nconst uniqueLinks = [...new Set(links)];\n\n// Devolver como items en n8n\nreturn uniqueLinks.map(link => ({ json: { url: link } }));\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        416,
        304
      ],
      "id": "8f19a950-c437-4f54-bf7f-856a385f5f5d",
      "name": "enlaces en formato yt-dlp1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2799a138-d176-4783-8aa0-ef6a38f42e46",
              "name": "pageurl",
              "value": "saca todos los enlaces que tengan loom o .gif al final: {\"props\":{\"pageProps\":{\"settings\":{\"mainMenuItem\":\"classroom\",\"mainMenuName\":\"group-default\",\"pageTitle\":\"01. Explicaci√≥n del desarrollo - ü§ñ | Bonus del mes 2 (Pr√°ctica) ¬∑ La Tribu Divisual\",\"pageMeta\":{\"description\":\"La comunidad de Inteligencia Artificial, Marketing y Negocios m√°s completa de habla hispana. Tu primer cliente garantizado.\",\"image\":\"https://cdn.loom.com/sessions/thumbnails/dceab8e99cbe4e16b410d542a5443e60-3f7b44d6efd01b35.gif\",\"title\":\"01. Explicaci√≥n del desarrollo - ü§ñ | Bonus del mes 2 (Pr√°ctica) ¬∑ La Tribu Divisual\",\"touchIcon\":\"https://assets.skool.com/f/6d5912f7d9d648ad84556aa8a00555e9/cafd1cfe3ede416aa6210f05b070f9b90d6a1db3da754f689da9f24486499fe8\"},\"previousPageBack\":false,\"courseRoute\":false},\"selectedModule\":\"3975a024fd164471878d29d011ab7208\",\"course\":{\"course\":{\"id\":\"38fa11883a5c4dccaa219f698b9f0580\",\"name\":\"1b708937\",\"metadata\":{\"coverImage\":\"https://assets.skool.com/f/6d5912f7d9d648ad84556aa8a00555e9/0d9473d017c34855b11a8ac1b9ec4e5c4f2b1fd9846e466fac628c02fe1e469d\",\"desc\":\"Todos los agentes, sistemas y desarrollos completos con sus plantillas para poder utilizar.\\nEste m√≥dulo est√° disponible para los miembros de La Tribu que tengan como m√≠nimo 1 mes de experiencia aqu√≠ dentro o accedan al plan anual.\\n\\nCada mes se a√±ade un nuevo desarrollo.\",\"dripConfig\":\"{\\\"enabled\\\":true,\\\"days\\\":34}\",\"dripDays\":4,\"hasAnnualUnlock\":1,\"numModules\":47,\"privacy\":4,\"title\":\"ü§ñ | Bonus del mes 2 (Pr√°ctica)\"},\"createdAt\":\"2025-03-28T17:45:56.583596Z\",\"updatedAt\":\"2025-08-15T15:24:46.488641Z\",\"unitType\":\"course\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true},\"children\":[{\"course\":{\"id\":\"ec8ca6b868e24577981378b380e1fc06\",\"name\":\"cfa89cd6\",\"metadata\":{\"title\":\"üñåÔ∏è | Explicaci√≥n del M√≥dulo\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/8ca977ce47cd439b91e70cbbb8ac7d09-de07192f0aba38cd.gif\"},\"createdAt\":\"2025-04-12T11:50:35.776536Z\",\"updatedAt\":\"2025-04-12T11:51:13.288415Z\",\"unitType\":\"module\",\"parentId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"e4e3fdebe96d4812a85824f36e4f5495\",\"name\":\"6fe8470b\",\"metadata\":{\"title\":\"üöÄ Mentoria 1:1 con Juan Pe Navarro (Tu turno)\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/b9837ec175dd4361b9292b2b5c8c296a-08f421ff7c7adb4b.gif\"},\"createdAt\":\"2025-06-17T19:29:48.559539Z\",\"updatedAt\":\"2025-07-26T17:07:00.056166Z\",\"unitType\":\"module\",\"parentId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"63bacfa3127b4d7bbf977b9e1231b0f3\",\"name\":\"38846037\",\"metadata\":{\"title\":\"üëáüèºüëáüèºüëáüèºüëáüèº Contenido en Redes Sociales\"},\"createdAt\":\"2025-07-28T09:21:41.242604Z\",\"updatedAt\":\"2025-07-28T09:23:17.04139Z\",\"unitType\":\"module\",\"parentId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"539a7ca736a641088bf42acfaa2069ad\",\"name\":\"b62613d7\",\"metadata\":{\"title\":\"Agente VEO 3 + N8N V√≠deos Virales\"},\"createdAt\":\"2025-06-14T17:41:56.547367Z\",\"updatedAt\":\"2025-06-15T16:01:53.948386Z\",\"unitType\":\"set\",\"parentId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true},\"children\":[{\"course\":{\"id\":\"cf006735949d4a01899b0c87991ebcc7\",\"name\":\"122dec94\",\"metadata\":{\"title\":\"01. Explicaci√≥n del desarrollo + Plantilla\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/73664cf9cebf471498cb5872289a0b15-825d74539ee2b873.gif\"},\"createdAt\":\"2025-06-14T17:42:07.556248Z\",\"updatedAt\":\"2025-06-15T16:01:53.948386Z\",\"unitType\":\"module\",\"parentId\":\"539a7ca736a641088bf42acfaa2069ad\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"3489c5cdd6c9489bb189b81c7b75ec39\",\"name\":\"4d9467a0\",\"metadata\":{\"title\":\"02. Instalaci√≥n completa\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/4871f076841f422597d18f3b76e74832-5c0fb6d119faf5e9.gif\"},\"createdAt\":\"2025-06-14T18:20:44.584353Z\",\"updatedAt\":\"2025-06-15T16:01:53.948386Z\",\"unitType\":\"module\",\"parentId\":\"539a7ca736a641088bf42acfaa2069ad\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}}]},{\"course\":{\"id\":\"014e4d3a0fe7425b8481994ffddf5ad4\",\"name\":\"abb4b758\",\"metadata\":{\"title\":\"Creador de V√≠deos Autom√°tico POV Virales\"},\"createdAt\":\"2025-03-28T17:46:35.404269Z\",\"updatedAt\":\"2025-04-01T23:50:15.116631Z\",\"unitType\":\"set\",\"parentId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true},\"children\":[{\"course\":{\"id\":\"a7dc55308fe2444a85c7b5bc0a9ee2f2\",\"name\":\"d40027ec\",\"metadata\":{\"title\":\"01. Explicaci√≥n del Desarrollo\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/62d9c1b4f6e44608afd16bfae8d45d4f-7818c7c750893685.gif\"},\"createdAt\":\"2025-03-29T10:55:28.492093Z\",\"updatedAt\":\"2025-08-05T08:18:31.727213Z\",\"unitType\":\"module\",\"parentId\":\"014e4d3a0fe7425b8481994ffddf5ad4\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"fba06a2fd4e54684b471c058ccba37ee\",\"name\":\"66c90e31\",\"metadata\":{\"title\":\"02. Creaci√≥n del GPT generador de ideas\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/870ddcd87ea940b89133e346e67113c9-d0230925963f3f93.gif\"},\"createdAt\":\"2025-03-29T11:00:21.725571Z\",\"updatedAt\":\"2025-04-11T16:10:24.552682Z\",\"unitType\":\"module\",\"parentId\":\"014e4d3a0fe7425b8481994ffddf5ad4\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"48f1ffac3bdb4adabeffb9a5af909f6d\",\"name\":\"1317fb38\",\"metadata\":{\"title\":\"03. Creaci√≥n del Agente generador de t√≠tulos\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/4875e26244b746eeb7d34d9bcc1fb76f-ee3b226904593731.gif\"},\"createdAt\":\"2025-03-29T11:13:34.252402Z\",\"updatedAt\":\"2025-04-11T16:20:56.208591Z\",\"unitType\":\"module\",\"parentId\":\"014e4d3a0fe7425b8481994ffddf5ad4\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"7a3cb79149e94bd8aca3fe21498beb97\",\"name\":\"0c825bb1\",\"metadata\":{\"title\":\"04. Creaci√≥n del Agente Copywritter\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/25a16f5e6a524b92bfbd776cad11df07-26314d58965e8329.gif\"},\"createdAt\":\"2025-04-11T16:26:06.333908Z\",\"updatedAt\":\"2025-04-11T16:32:02.011752Z\",\"unitType\":\"module\",\"parentId\":\"014e4d3a0fe7425b8481994ffddf5ad4\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"c7e189786cc548da9416b002af8990c4\",\"name\":\"52e2541c\",\"metadata\":{\"title\":\"05. Creaci√≥n del Agente generador de Prompts\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/0efda080b1804c78b1cc91fc889dd8a0-b9b5c4eca2cc8873.gif\"},\"createdAt\":\"2025-03-29T11:16:31.397468Z\",\"updatedAt\":\"2025-04-11T16:38:26.614706Z\",\"unitType\":\"module\",\"parentId\":\"014e4d3a0fe7425b8481994ffddf5ad4\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"55f09e1ac4d243a0849005f9b6b956d0\",\"name\":\"fa230c1c\",\"metadata\":{\"title\":\"06. Generaci√≥n de imagen (Flux)\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/52d705ebd8484bd59b670ba33630c0dc-5f2f36e69a6b4e54.gif\"},\"createdAt\":\"2025-03-29T11:23:08.997454Z\",\"updatedAt\":\"2025-04-12T09:55:03.241299Z\",\"unitType\":\"module\",\"parentId\":\"014e4d3a0fe7425b8481994ffddf5ad4\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"b0f8cb7dfcaf41a58f797ac89c10adb0\",\"name\":\"e7a9e835\",\"metadata\":{\"title\":\"07. Generador de v√≠deo (Kling)\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/07f540e4a5214c3e99a5068a3e2b687d-37e7230b693e16c4.gif\"},\"createdAt\":\"2025-03-29T11:23:55.650919Z\",\"updatedAt\":\"2025-04-12T10:13:55.892244Z\",\"unitType\":\"module\",\"parentId\":\"014e4d3a0fe7425b8481994ffddf5ad4\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"86db47526b3540848b17c62e75bbfd28\",\"name\":\"185f10ff\",\"metadata\":{\"title\":\"08. Generador de sonido (ElevenLabs)\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/0a9d2820bc0e4f4aa8c3baa536346f94-1b91e04f3aa55b03.gif\"},\"createdAt\":\"2025-03-29T11:24:42.265999Z\",\"updatedAt\":\"2025-05-12T10:51:47.846082Z\",\"unitType\":\"module\",\"parentId\":\"014e4d3a0fe7425b8481994ffddf5ad4\",\"rootId\":\"38fa11883a5c4dccaa219f698b9f0580\",\"userId\":\"ce9f03c651454698831e411bc2171927\",\"groupId\":\"6d5912f7d9d648ad84556aa8a00555e9\",\"state\":2,\"public\":true}},{\"course\":{\"id\":\"ebc50dd2b8174db5ba2ed959491ec0fa\",\"name\":\"661cde2f\",\"metadata\":{\"title\":\"09. Renderizado del v√≠deo final (Creatomate)\",\"videoThumbnail\":\"https://cdn.loom.com/sessions/thumbnails/db80441c37fd4fd9a2d1901711af4f5a-e33646d91b968c98.gif\"},\"createdAt\":\"2025-03-29T11:31:20.765704Z\",\"updatedAt\":\"2025-04-12T10:‚Ä¶",
              "type": "string"
            },
            {
              "id": "592c8590-6316-4dff-af8f-714899805042",
              "name": "",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        144,
        304
      ],
      "id": "39b8ed2a-3794-4781-b35c-b747b2c084b9",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "model": "sonar-pro",
        "messages": {
          "message": [
            {
              "content": "escribe de 1 al 10"
            }
          ]
        },
        "options": {},
        "requestOptions": {}
      },
      "type": "n8n-nodes-base.perplexity",
      "typeVersion": 1,
      "position": [
        1056,
        0
      ],
      "id": "d7e9b842-3ed3-48b8-b5d6-9e8520156a45",
      "name": "Message a model",
      "credentials": {}
    }
  ],
  "origin": "n8n",
  "pinData": {},
  "repo": {
    "owner": "abdeidr",
    "name": "n8n"
  },
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "createdAt": "2025-08-19T19:14:14.866Z",
      "updatedAt": "2025-08-19T19:14:14.866Z",
      "role": "workflow:owner",
      "workflowId": "V7NnlztjxmsBEtBH",
      "projectId": "xdZYvePgLSibegaD"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-09-23T15:29:16.000Z",
  "versionId": "89774b67-e2ee-49c1-b489-04d6cb08e620"
}